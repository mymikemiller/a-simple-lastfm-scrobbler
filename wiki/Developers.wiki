#summary How other applications can scrobble music through Simple Last.fm Scrobbler
#labels Phase-Implementation

= Introduction =

Any application can easily scrobble their music through Simple Last.fm Scrobbler (SLS). It is just to send certain broadcasts with the appropriate track information, and SLS will do the rest.

You just have to implement the behavior below, then send a mail to [mailto:simple.lfm.scrobbler@gmail.com simple.lfm.scrobbler@gmail.com] and tell me about it. I'll then quickly implement a new listener in SLS, which is done in less than a day.

= Details =

*Notice: I've recently changed the API, and I apologize for any inconvenience this may have caused.*

The broadcast action is:

|| PLAYSTATECHANGED || "com.example.musicapp.notify.playstatechanged" || Intent for SLS to listen for ||

which must contain one of these states:

|| START || 0 || A track has started playing ||
|| RESUME || 1 || Playback has been paused for a/the track ||
|| PAUSE || 2 || Playback has been resumed for a/the track ||
|| COMPLETE || 3 || A/The track has finished playing ||

Replace "com.example.musicapp" with your app's package name.

It is not necessary to broadcast with state set to COMPLETE for a track to scrobble; if a new track starts playing and START is broadcast, previously broadcasted tracks will scrobble automatically.

If you loop the same track, you have to send a COMPLETE for proper scrobbling.

RESUME/PAUSE can be ignored and the scrobbling will still work (but with minor flaws, such as a track might get scrobbled, even though it has been played for less then 30s, or less than half it's duration).

The fields for the broadcast intent are (artist, album, track, duration, state), and they are all mandatory.


= Examples =

This sends a broadcast that Chris Cornell's song "You Know My Name" has started playing, and will scrobble any previously playing tracks:

{{{
Intent bCast = new Intent(PLAYSTATECHANGED);
bCast.putExtra("state", START);
bCast.putExtra("artist", "Chris Cornell");
bCast.putExtra("album", "Casino Royale");
bCast.putExtra("track", "You Know My Name");
bCast.putExtra("duration", 244);
sendBroadcast(bCast);
}}}

And this says that James Marster's song "Looking At You" has finished playing and should be scrobbled: 

{{{
Intent bCast = new Intent(PLAYSTATE);
bCast.putExtra("state", COMPLETE);
bCast.putExtra("artist", "James Marster");
bCast.putExtra("album", "Like A Waterfall");
bCast.putExtra("track", "Looking At You");
bCast.putExtra("duration", 175);
sendBroadcast(bCast);
}}}

= Custom Broadcasts =

If you already broadcast your own intents, tell me about them and I'll see if I can work them into SLS. 